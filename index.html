<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lift Control - Acesso Seguro</title>
  <style>
    /* Seu CSS original aqui (n√£o modificado para manter estilo) */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #2c5364 0%, #203a43 50%, #0f2027 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      max-width: 500px;
      width: 100%;
      background: white;
      border-radius: 20px;
      padding: 50px 40px;
      box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4);
      text-align: center;
    }

    .logo {
      font-size: 48px;
      color: #2c5364;
      font-weight: 700;
      margin-bottom: 12px;
    }

    .subtitle {
      color: #666;
      font-size: 16px;
      margin-bottom: 40px;
    }

    .access-form {
      text-align: left;
    }

    label {
      display: block;
      font-weight: 600;
      color: #2c5364;
      margin-bottom: 8px;
      font-size: 15px;
    }

    input {
      width: 100%;
      padding: 14px 16px;
      font-size: 16px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      margin-bottom: 25px;
      transition: border-color 0.3s;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    input:focus {
      outline: none;
      border-color: #2c5364;
    }

    button {
      width: 100%;
      background: #2c5364;
      color: white;
      border: none;
      padding: 16px;
      border-radius: 50px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(44, 83, 100, 0.3);
    }

    button:hover {
      background: #1a3a47;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(44, 83, 100, 0.4);
    }

    .error-message {
      background: #ffe5e5;
      color: #c00;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
      font-size: 14px;
      border-left: 4px solid #c00;
    }

    .info-box {
      background: #f0f8ff;
      padding: 20px;
      border-radius: 12px;
      margin-top: 30px;
      border-left: 4px solid #2c5364;
      text-align: left;
    }

    .info-box h3 {
      color: #2c5364;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .info-box p {
      color: #666;
      font-size: 14px;
      line-height: 1.6;
    }

    .info-box a {
      color: #2c5364;
      font-weight: 600;
      text-decoration: none;
    }

    .info-box a:hover {
      text-decoration: underline;
    }

    #mainContent {
      display: none;
    }

    .token-link-container {
      margin-top: 20px;
      background: #d9edf7;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #bce8f1;
      word-break: break-word;
      font-size: 14px;
      color: #31708f;
    }

    @media (max-width: 600px) {
      .container {
        padding: 40px 30px;
      }

      .logo {
        font-size: 36px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- TELA DE LOGIN -->
    <div id="loginScreen">
      <div class="logo">Lift Control</div>
      <p class="subtitle">Sistema Digital de Checklist para Elevadores</p>

      <div class="error-message" id="errorMessage">
        ‚ùå C√≥digo de acesso inv√°lido. Verifique e tente novamente.
      </div>

      <form class="access-form" id="accessForm">
        <label for="accessCode">C√≥digo de Acesso do Condom√≠nio</label>
        <input 
          type="text" 
          id="accessCode" 
          placeholder="Digite o c√≥digo fornecido"
          autocomplete="off"
          required
        />

        <button type="submit">Acessar Sistema</button>
      </form>

      <div id="tokenLinkContainer" class="token-link-container" style="display:none;">
        <strong>Link para t√©cnico:</strong> <br>
        <a href="" target="_blank" id="tokenLink"></a>
      </div>

      <div class="info-box">
        <h3>üîê Primeiro acesso?</h3>
        <p>
          Entre em contato para receber seu c√≥digo exclusivo:<br>
          üìß <a href="mailto:liftcontrolbr@gmail.com">liftcontrolbr@gmail.com</a><br>
          üì± <a href="https://wa.me/5513991561959">(13) 99156-1959</a>
        </p>
      </div>
    </div>

    <!-- CONTE√öDO PRINCIPAL (ap√≥s login) -->
    <div id="mainContent">
      <div class="logo">Lift Control</div>
      <p class="subtitle" id="condominioNome">Carregando...</p>
      
      <div style="display: flex; gap: 15px; flex-direction: column; margin-top: 30px;">
        <a href="template-checklist.html" id="linkChecklist" target="_blank" style="display: block; background: #2c5364; color: white; padding: 16px; border-radius: 50px; text-decoration: none; font-weight: 600; transition: all 0.3s;">
          Abrir Checklist
        </a>
        <a href="demo-checklist.html" target="_blank" style="display: block; background: #5a7c8a; color: white; padding: 16px; border-radius: 50px; text-decoration: none; font-weight: 600; transition: all 0.3s;">
          Ver Demonstra√ß√£o
        </a>
      </div>

      <button onclick="logout()" style="margin-top: 30px; background: #999;">
        Sair
      </button>
    </div>
  </div>

  <script>
    const condominios = {
      "SOLAR2025": {
        nome: "Edif√≠cio Solar",
        endereco: "Rua das Flores, 123 - Gonzaga, Santos/SP",
        email: "rodraigof97@gmail.com",
        telefone: "(13) 3234-5678",
        totalElevadores: "2"
      },
      "ATLANTICO2025": {
        nome: "Condom√≠nio Atl√¢ntico",
        endereco: "Av. Atl√¢ntica, 456 - Boqueir√£o, Santos/SP",
        email: "contato@condominioatlantico.com.br",
        telefone: "(13) 3345-6789",
        totalElevadores: "3"
      },
      "CENTRAL2025": {
        nome: "Residencial Central Park",
        endereco: "Rua Central, 789 - Centro, Santos/SP",
        email: "administracao@centralpark.com.br",
        telefone: "(13) 3456-7890",
        totalElevadores: "4"
      }
    };

    // Mapa token para c√≥digo condom√≠nio
    const tokenMap = {};

    // Fun√ß√£o simples para gerar token
    function gerarToken() {
      return Math.random().toString(36).substring(2, 10).toUpperCase();
    }

    document.getElementById('accessForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const code = document.getElementById('accessCode').value.trim().toUpperCase();
      const errorMsg = document.getElementById('errorMessage');

      if (condominios[code]) {
        errorMsg.style.display = 'none';
        localStorage.setItem('liftcontrol_auth', code);
        localStorage.setItem('liftcontrol_dados', JSON.stringify(condominios[code]));

        // Gerar token para acesso do t√©cnico (guardando associa√ß√£o local)
        if (!tokenMap[code]) {
          const token = gerarToken();
          tokenMap[code] = token;
        }
        const token = tokenMap[code];
        const link = `${window.location.origin}/template-checklist.html?token=${token}`;

        // Mostrar link para o s√≠ndico copiar/enviar
        const tokenContainer = document.getElementById('tokenLinkContainer');
        const tokenLinkEl = document.getElementById('tokenLink');
        tokenLinkEl.href = link;
        tokenLinkEl.textContent = link;
        tokenContainer.style.display = 'block';

        showMainContent();
      } else {
        errorMsg.style.display = 'block';
        document.getElementById('accessCode').value = '';
        document.getElementById('accessCode').focus();
        setTimeout(() => errorMsg.style.display = 'none', 3000);
      }
    });

    window.addEventListener('load', function() {
      const auth = localStorage.getItem('liftcontrol_auth');
      if (auth && condominios[auth]) {
        showMainContent();
      }
    });

    function showMainContent() {
      const dados = JSON.parse(localStorage.getItem('liftcontrol_dados'));
      document.getElementById('loginScreen').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
      document.getElementById('condominioNome').textContent = dados.nome;

      // Setar o link do checklist baseado no token
      const code = localStorage.getItem('liftcontrol_auth');
      const token = tokenMap[code];
      if(token) {
        document.getElementById('linkChecklist').href = `${window.location.origin}/template-checklist.html?token=${token}`;
      }
    }

    function logout() {
      localStorage.removeItem('liftcontrol_auth');
      localStorage.removeItem('liftcontrol_dados');
      location.reload();
    }
  </script>
</body>
</html>
