<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checklist Digital – Lift Control (PDF em 1 página)</title>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px; background-color: #f0f2f5; color: #223151;
    }
    form {
      max-width: 800px; margin: auto; background: white;
      border-radius: 10px; padding: 30px;
      box-shadow: 0 0 15px rgba(0,0,0,.1);
    }
    label {
      display: block; margin-top: 20px; font-weight: 600;
    }
    input, select, textarea {
      width: 100%; padding: 10px; margin-top: 6px;
      border-radius: 6px; border: 1px solid #ccc; font-size: 16px;
      box-sizing: border-box;
    }
    textarea { min-height: 100px; resize: vertical; }
    button {
      margin-top: 25px; padding: 15px 40px;
      font-weight: 700; font-size: 18px;
      background-color: #2a65ad; color: white; border:none;
      border-radius: 40px; cursor: pointer;
    }
    button:hover {
      background-color: #184a6e;
    }
    ul {
      padding-left: 20px; margin-top: 5px; font-size: 14px;
    }
  </style>
</head>
<body>

<form id="checklistForm" novalidate>
  <h1>Checklist Digital – Lift Control</h1>

  <!-- Dados -->
  <label for="nomeCondominio">Nome do Condomínio *</label>
  <input id="nomeCondominio" name="nomeCondominio" required placeholder="Ex: Edifício Solar" />

  <label for="endereco">Endereço Completo *</label>
  <input id="endereco" name="endereco" required />

  <label for="totalElevadores">Total de Elevadores no Prédio *</label>
  <input id="totalElevadores" name="totalElevadores" type="number" min="1" required />

  <label for="elevadorInspecionado">Elevador Inspecionado *</label>
  <select id="elevadorInspecionado" name="elevadorInspecionado" required>
    <option value="" disabled selected>Selecione...</option>
    <option>Social</option>
    <option>Serviço</option>
    <option>Elevador 1</option>
    <option>Elevador 2</option>
    <option>Elevador 3</option>
  </select>

  <label for="emailCondominio">Email do Condomínio *</label>
  <input id="emailCondominio" name="emailCondominio" type="email" required placeholder="contato@condominio.com" />

  <label for="telefoneResponsavel">Telefone do Responsável *</label>
  <input id="telefoneResponsavel" name="telefoneResponsavel" required placeholder="(13) 99999-9999" pattern="^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$" />

  <label for="dataManutencao">Data da Manutenção *</label>
  <input id="dataManutencao" name="dataManutencao" type="date" required />

  <label for="tipoManutencao">Tipo de Manutenção *</label>
  <select id="tipoManutencao" name="tipoManutencao" required>
    <option value="" disabled selected>Selecione...</option>
    <option>Preventiva</option>
    <option>Corretiva</option>
    <option>Emergencial</option>
  </select>

  <label for="nomeTecnico">Nome Completo do Técnico *</label>
  <input id="nomeTecnico" name="nomeTecnico" required placeholder="Nome completo" />

  <label for="empresaTecnico">Empresa do Técnico *</label>
  <input id="empresaTecnico" name="empresaTecnico" required />

  <label for="registroTecnico">CREA / Registro Profissional</label>
  <input id="registroTecnico" name="registroTecnico" />

  <!-- Checklists -->
  <label>Casa de Máquinas</label>
  <ul>
    <li>Motor de tração: <input type="checkbox" name="motor" /></li>
    <li>Freio eletromagnético: <input type="checkbox" name="freio" /></li>
    <li>Redutor: <input type="checkbox" name="redutor" /></li>
    <li>Quadro de comando: <input type="checkbox" name="quadro" /></li>
    <li>Limitador de velocidade: <input type="checkbox" name="limitador" /></li>
    <li>Cabos de tração: <input type="checkbox" name="cabos" /></li>
    <li>Polias: <input type="checkbox" name="polias" /></li>
    <li>Ventilação: <input type="checkbox" name="ventilacao" /></li>
    <li>Iluminação emergência: <input type="checkbox" name="iluminacaoEmergencia" /></li>
    <li>Limpeza geral: <input type="checkbox" name="limpeza" /></li>
  </ul>

  <label>Cabina</label>
  <ul>
    <li>Portas: <input type="checkbox" name="portas" /></li>
    <li>Botões: <input type="checkbox" name="botoes" /></li>
    <li>Display / Indicadores: <input type="checkbox" name="display" /></li>
    <li>Iluminação interna: <input type="checkbox" name="iluminacaoInterna" /></li>
    <li>Ventilação / Exaustor: <input type="checkbox" name="ventilacaoCabina" /></li>
    <li>Interfone / Alarme: <input type="checkbox" name="interfone" /></li>
    <li>Espelho / Acabamentos: <input type="checkbox" name="espelho" /></li>
    <li>Piso / Nivelamento: <input type="checkbox" name="piso" /></li>
  </ul>

  <label>Poço</label>
  <ul>
    <li>Amortecedores: <input type="checkbox" name="amortecedores" /></li>
    <li>Limpeza do poço: <input type="checkbox" name="limpezaPoco" /></li>
    <li>Drenagem de água: <input type="checkbox" name="drenagem" /></li>
    <li>Iluminação: <input type="checkbox" name="iluminacaoPoco" /></li>
    <li>Cabos elétricos: <input type="checkbox" name="cabosEletricos" /></li>
  </ul>

  <label for="reparosExecutados">Reparos Executados *</label>
  <textarea id="reparosExecutados" name="reparosExecutados" minlength="10" required placeholder="Descreva detalhadamente os reparos..."></textarea>

  <label for="observacoes">Observações / Recomendações</label>
  <textarea id="observacoes" name="observacoes" placeholder="Observações importantes ou recomendações"></textarea>

  <button type="submit">Gerar PDF</button>
</form>

<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script>
  document.querySelector('form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;

    if(!form.checkValidity()) {
      alert('Por favor, preencha todos os campos obrigatórios corretamente.');
      form.reportValidity();
      return;
    }

    const dados = {};
    new FormData(form).forEach((value, key) => {
      dados[key] = value;
    });

    ['motor','freio','redutor','quadro','limitador','cabos','polias','ventilacao',
     'iluminacaoEmergencia','limpeza','portas','botoes','display','iluminacaoInterna',
     'ventilacaoCabina','interfone','espelho','piso','amortecedores','limpezaPoco',
     'drenagem','iluminacaoPoco','cabosEletricos'].forEach(id => {
      dados[id] = form.elements[id] && form.elements[id].checked ? "Ok" : "Pendente";
    });

    // Formatar data DD/MM/AAAA
    function formatDateBR(dateStr) {
      if(!dateStr) return '-';
      const [y,m,d] = dateStr.split('-');
      return `${d}/${m}/${y}`;
    }
    dados.dataManutencao = formatDateBR(dados.dataManutencao);

    const { jsPDF } = window.jspdf;

    const pdf = new jsPDF('p', 'pt', 'a4');
    const margin = 40;
    const pageWidth = pdf.internal.pageSize.width - margin * 2;
    const lineHeight = 20;
    let y = margin;

    function printText(text, options = {}) {
      const {fontSize=12, fontStyle='normal', align='left'} = options;
      pdf.setFontSize(fontSize);
      pdf.setFont(undefined, fontStyle);
      const splitText = pdf.splitTextToSize(text, pageWidth);
      pdf.text(splitText, margin, y, {align: align});
      y += splitText.length * (fontSize * 1.15);
    }

    printText('Checklist Digital – Lift Control', {fontSize:18, fontStyle:'bold', align:'center'});
    y += 10;
    pdf.setDrawColor(200);
    pdf.setLineWidth(0.5);
    pdf.line(margin, y, pageWidth + margin, y);
    y += 15;

    printText('Dados do Condomínio', {fontSize:14, fontStyle:'bold'});
    printText(`Nome: ${dados.nomeCondominio}`);
    printText(`Endereço: ${dados.endereco}`);
    printText(`Total de Elevadores: ${dados.totalElevadores}`);
    printText(`Elevador Inspecionado: ${dados.elevadorInspecionado}`);
    printText(`Email: ${dados.emailCondominio}`);
    printText(`Telefone: ${dados.telefoneResponsavel}`);

    y += 10;
    pdf.line(margin, y, pageWidth + margin, y);
    y += 15;

    printText('Manutenção', {fontSize:14, fontStyle:'bold'});
    printText(`Data: ${dados.dataManutencao}`);
    printText(`Tipo: ${dados.tipoManutencao}`);
    printText(`Técnico: ${dados.nomeTecnico}`);
    printText(`Empresa: ${dados.empresaTecnico}`);
    printText(`Registro: ${dados.registroTecnico || '-'}`);

    y += 10;
    pdf.line(margin, y, pageWidth + margin, y);
    y += 15;

    function printList(title, items) {
      printText(title, {fontSize:14, fontStyle:'bold'});
      items.forEach(item => printText(`- ${item}`));
      y += 10;
    }

    printList('Casa de Máquinas', [
      `Motor de tração: ${dados.motor}`,
      `Freio eletromagnético: ${dados.freio}`,
      `Redutor: ${dados.redutor}`,
      `Quadro de comando: ${dados.quadro}`,
      `Limitador de velocidade: ${dados.limitador}`,
      `Cabos de tração: ${dados.cabos}`,
      `Polias: ${dados.polias}`,
      `Ventilação: ${dados.ventilacao}`,
      `Iluminação de emergência: ${dados.iluminacaoEmergencia}`,
      `Limpeza geral: ${dados.limpeza}`
    ]);

    printList('Cabina', [
      `Portas: ${dados.portas}`,
      `Botões: ${dados.botoes}`,
      `Display / Indicadores: ${dados.display}`,
      `Iluminação interna: ${dados.iluminacaoInterna}`,
      `Ventilação / Exaustor: ${dados.ventilacaoCabina}`,
      `Interfone / Alarme: ${dados.interfone}`,
      `Espelho / Acabamentos: ${dados.espelho}`,
      `Piso / Nivelamento: ${dados.piso}`
    ]);

    printList('Poço', [
      `Amortecedores: ${dados.amortecedores}`,
      `Limpeza do poço: ${dados.limpezaPoco}`,
      `Drenagem de água: ${dados.drenagem}`,
      `Iluminação: ${dados.iluminacaoPoco}`,
      `Cabos elétricos: ${dados.cabosEletricos}`
    ]);

    printText('Reparos Executados', {fontSize:14, fontStyle:'bold'});
    printText(dados.reparosExecutados || '-');

    printText('Observações / Recomendações', {fontSize:14, fontStyle:'bold'});
    printText(dados.observacoes || '-');

    y += 20;
    pdf.line(margin, y, pageWidth + margin, y);
    y += 15;
    printText('Gerado por Lift Control - 2025', {fontSize:12, align:'center'});

    pdf.save(`Checklist_${dados.nomeCondominio.replace(/\s+/g,"")}_${dados.elevadorInspecionado.replace(/\s+/g,"")}.pdf`);
  });
</script>
</body>
</html>
