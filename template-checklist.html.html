<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checklist Digital – Lift Control</title>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background: linear-gradient(135deg, #2c5364 0%, #203a43 50%, #0f2027 100%);
      min-height: 100vh;
      color: #223151;
    }
    
    .back-link {
      display: inline-block;
      margin-bottom: 20px;
      color: white;
      text-decoration: none;
      font-weight: 600;
      padding: 10px 25px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      transition: all 0.3s ease;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      display: block;
      width: fit-content;
    }
    
    .back-link:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    form {
      max-width: 800px;
      background: white;
      margin: auto;
      padding: 30px 40px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,.3);
    }
    
    h1 {
      color: #2c5364;
      text-align: center;
      margin-bottom: 30px;
    }
    
    h2 {
      color: #2c5364;
      margin-top: 30px;
      margin-bottom: 15px;
      font-size: 18px;
      border-bottom: 2px solid #2c5364;
      padding-bottom: 8px;
    }
    
    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 10px 14px;
      font-size: 15px;
      border-radius: 6px;
      border: 1.5px solid #ccc;
      margin-top: 8px;
      box-sizing: border-box;
      font-weight: 500;
      color: #223151;
      resize: vertical;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #2c5364;
    }
    
    textarea {
      min-height: 100px;
    }
    
    label.check-item {
      display: flex;
      align-items: center;
      margin-top: 8px;
      font-weight: 600;
      font-size: 14px;
      color: #223151;
      user-select: none;
      cursor: pointer;
    }
    
    label.check-item input[type="checkbox"] {
      margin-right: 10px;
      width: 22px;
      height: 22px;
      cursor: pointer;
    }
    
    button {
      margin-top: 30px;
      background-color: #2c5364;
      color: white;
      border: none;
      padding: 15px 45px;
      border-radius: 50px;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(44, 83, 100, 0.3);
    }
    
    button:hover {
      background-color: #1a3a47;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(44, 83, 100, 0.4);
    }
    
    .checklist-section {
      margin-top: 20px;
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }
    
    .required {
      color: #e74c3c;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <a href="index.html" class="back-link">← Voltar ao Menu</a>
  
  <form id="checklistForm" novalidate>
    <h1>Checklist Digital – Lift Control</h1>

    <label for="nomeCondominio">Nome do Condomínio <span class="required">*</span></label>
    <input id="nomeCondominio" name="nomeCondominio" type="text" required autocomplete="off" />

    <label for="endereco">Endereço Completo <span class="required">*</span></label>
    <input id="endereco" name="endereco" type="text" required autocomplete="off" />

    <label for="totalElevadores">Total de Elevadores no Prédio <span class="required">*</span></label>
    <input id="totalElevadores" name="totalElevadores" type="number" min="1" required autocomplete="off" />

    <label for="elevadorInspecionado">Elevador Inspecionado <span class="required">*</span></label>
    <select id="elevadorInspecionado" name="elevadorInspecionado" required>
      <option value="" disabled selected>Selecione...</option>
      <option>Social</option>
      <option>Serviço</option>
      <option>Elevador 1</option>
      <option>Elevador 2</option>
      <option>Elevador 3</option>
    </select>

    <label for="emailCondominio">Email do Condomínio <span class="required">*</span></label>
    <input id="emailCondominio" name="emailCondominio" type="email" required autocomplete="off" />

    <label for="telefoneResponsavel">Telefone do Responsável <span class="required">*</span></label>
    <input id="telefoneResponsavel" name="telefoneResponsavel" type="text" pattern="^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$" required autocomplete="off" placeholder="(11) 98765-4321" />

    <label for="dataManutencao">Data da Manutenção <span class="required">*</span></label>
    <input id="dataManutencao" name="dataManutencao" type="date" required />

    <label for="tipoManutencao">Tipo de Manutenção <span class="required">*</span></label>
    <select id="tipoManutencao" name="tipoManutencao" required>
      <option value="" disabled selected>Selecione...</option>
      <option>Preventiva</option>
      <option>Corretiva</option>
      <option>Emergencial</option>
    </select>

    <label for="nomeTecnico">Nome Completo do Técnico <span class="required">*</span></label>
    <input id="nomeTecnico" name="nomeTecnico" type="text" required autocomplete="off" />

    <label for="empresaTecnico">Empresa do Técnico <span class="required">*</span></label>
    <input id="empresaTecnico" name="empresaTecnico" type="text" required autocomplete="off" />

    <label for="registroTecnico">CREA / Registro Profissional</label>
    <input id="registroTecnico" name="registroTecnico" type="text" autocomplete="off" />

    <div class="checklist-section">
      <h2>Casa de Máquinas</h2>
      <label class="check-item"><input type="checkbox" name="motor" /> Motor de tração</label>
      <label class="check-item"><input type="checkbox" name="freio" /> Freio eletromagnético</label>
      <label class="check-item"><input type="checkbox" name="redutor" /> Redutor</label>
      <label class="check-item"><input type="checkbox" name="quadro" /> Quadro de comando</label>
      <label class="check-item"><input type="checkbox" name="limitador" /> Limitador de velocidade</label>
      <label class="check-item"><input type="checkbox" name="cabos" /> Cabos de tração</label>
      <label class="check-item"><input type="checkbox" name="polias" /> Polias</label>
      <label class="check-item"><input type="checkbox" name="ventilacao" /> Ventilação da casa</label>
      <label class="check-item"><input type="checkbox" name="iluminacaoEmergencia" /> Iluminação de emergência</label>
      <label class="check-item"><input type="checkbox" name="limpeza" /> Limpeza geral</label>
    </div>

    <div class="checklist-section">
      <h2>Cabina</h2>
      <label class="check-item"><input type="checkbox" name="portas" /> Portas</label>
      <label class="check-item"><input type="checkbox" name="botoes" /> Botões</label>
      <label class="check-item"><input type="checkbox" name="display" /> Display / Indicadores</label>
      <label class="check-item"><input type="checkbox" name="iluminacaoInterna" /> Iluminação interna</label>
      <label class="check-item"><input type="checkbox" name="ventilacaoCabina" /> Ventilação / Exaustor</label>
      <label class="check-item"><input type="checkbox" name="interfone" /> Interfone / Alarme</label>
      <label class="check-item"><input type="checkbox" name="espelho" /> Espelho / Acabamentos</label>
      <label class="check-item"><input type="checkbox" name="piso" /> Piso / Nivelamento</label>
    </div>

    <div class="checklist-section">
      <h2>Poço</h2>
      <label class="check-item"><input type="checkbox" name="amortecedores" /> Amortecedores</label>
      <label class="check-item"><input type="checkbox" name="limpezaPoco" /> Limpeza do poço</label>
      <label class="check-item"><input type="checkbox" name="drenagem" /> Drenagem de água</label>
      <label class="check-item"><input type="checkbox" name="iluminacaoPoco" /> Iluminação</label>
      <label class="check-item"><input type="checkbox" name="cabosEletricos" /> Cabos elétricos</label>
    </div>

    <label for="reparosExecutados" style="margin-top: 30px;">Reparos Executados <span class="required">*</span></label>
    <textarea id="reparosExecutados" name="reparosExecutados" minlength="10" required placeholder="Descreva os reparos executados durante a manutenção..."></textarea>

    <label for="observacoes" style="margin-top: 20px;">Observações / Recomendações</label>
    <textarea id="observacoes" name="observacoes" placeholder="Observações adicionais ou recomendações para próximas manutenções..."></textarea>

    <button type="submit">Gerar PDF</button>
  </form>

  <script>
    document.getElementById('checklistForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!e.target.checkValidity()) {
        alert('Por favor, preencha todos os campos obrigatórios corretamente.');
        e.target.reportValidity();
        return;
      }

      const dados = {};
      new FormData(e.target).forEach((value, key) => {
        dados[key] = value;
      });

      const checkboxIds = [
        'motor','freio','redutor','quadro','limitador','cabos','polias','ventilacao','iluminacaoEmergencia','limpeza',
        'portas','botoes','display','iluminacaoInterna','ventilacaoCabina','interfone','espelho','piso',
        'amortecedores','limpezaPoco','drenagem','iluminacaoPoco','cabosEletricos'
      ];
      
      checkboxIds.forEach(id => {
        const el = e.target.elements[id];
        dados[id] = el && el.checked ? "✓ Ok" : "✗ Pendente";
      });

      function formatDateBR(dateStr) {
        if(!dateStr) return '-';
        const [year, month, day] = dateStr.split("-");
        return `${day}/${month}/${year}`;
      }
      dados.dataManutencao = formatDateBR(dados.dataManutencao);

      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('p', 'pt', 'a4');
      
      const margin = 40;
      const pageWidth = pdf.internal.pageSize.width;
      const pageHeight = pdf.internal.pageSize.height;
      const contentWidth = pageWidth - (margin * 2);
      const maxY = pageHeight - margin - 25;
      
      let y = margin;
      let currentPage = 1;

      function addNewPage() {
        pdf.addPage();
        currentPage++;
        y = margin;
      }

      function checkPageBreak(requiredSpace) {
        if (y + requiredSpace > maxY) {
          addNewPage();
        }
      }

      function printMainTitle(text) {
        checkPageBreak(50);
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(18);
        pdf.setTextColor(44, 83, 100);
        pdf.text(text, pageWidth / 2, y, { align: 'center' });
        y += 25;
      }

      function printSectionTitle(text) {
        checkPageBreak(30);
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(13);
        pdf.setTextColor(44, 83, 100);
        
        pdf.text(text, margin, y);
        y += 3;
        pdf.setDrawColor(44, 83, 100);
        pdf.setLineWidth(1.5);
        pdf.line(margin, y, pageWidth - margin, y);
        y += 12;
        pdf.setTextColor(0, 0, 0);
      }

      function printField(label, value) {
        checkPageBreak(20);
        
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(9);
        pdf.text(label + ':', margin, y);
        
        pdf.setFont('helvetica', 'normal');
        pdf.setFontSize(9);
        
        const labelWidth = pdf.getTextWidth(label + ': ') + 5;
        const remainingWidth = contentWidth - labelWidth;
        const lines = pdf.splitTextToSize(value, remainingWidth);
        
        pdf.text(lines[0], margin + labelWidth, y);
        
        for (let i = 1; i < lines.length; i++) {
          y += 12;
          checkPageBreak(15);
          pdf.text(lines[i], margin + labelWidth, y);
        }
        
        y += 14;
      }

      function printCheckItem(label, status) {
        checkPageBreak(18);
        
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(9);
        
        if (status.includes('Ok')) {
          pdf.setTextColor(0, 120, 0);
          pdf.text('✓ Ok', margin + 10, y);
        } else {
          pdf.setTextColor(200, 0, 0);
          pdf.text('✗ Pendente', margin + 10, y);
        }
        
        pdf.setTextColor(0, 0, 0);
        pdf.setFont('helvetica', 'normal');
        pdf.text(label, margin + 90, y);
        
        y += 14;
      }

      function printLongText(text) {
        checkPageBreak(25);
        
        pdf.setFont('helvetica', 'normal');
        pdf.setFontSize(9);
        
        const lines = pdf.splitTextToSize(text, contentWidth - 20);
        
        lines.forEach(line => {
          checkPageBreak(15);
          pdf.text(line, margin + 10, y);
          y += 13;
        });
        
        y += 5;
      }

      printMainTitle('CHECKLIST DIGITAL - LIFT CONTROL');
      
      printSectionTitle('Dados do Condomínio');
      printField('Nome', dados.nomeCondominio);
      printField('Endereço', dados.endereco);
      printField('Total de Elevadores', dados.totalElevadores);
      printField('Elevador Inspecionado', dados.elevadorInspecionado);
      printField('Email', dados.emailCondominio);
      printField('Telefone', dados.telefoneResponsavel);
      
      y += 5;
      
      printSectionTitle('Dados da Manutenção');
      printField('Data', dados.dataManutencao);
      printField('Tipo', dados.tipoManutencao);
      printField('Técnico Responsável', dados.nomeTecnico);
      printField('Empresa', dados.empresaTecnico);
      printField('Registro Profissional', dados.registroTecnico || 'Não informado');
      
      y += 5;
      
      printSectionTitle('Casa de Máquinas');
      printCheckItem('Motor de tração', dados.motor);
      printCheckItem('Freio eletromagnético', dados.freio);
      printCheckItem('Redutor', dados.redutor);
      printCheckItem('Quadro de comando', dados.quadro);
      printCheckItem('Limitador de velocidade', dados.limitador);
      printCheckItem('Cabos de tração', dados.cabos);
      printCheckItem('Polias', dados.polias);
      printCheckItem('Ventilação da casa', dados.ventilacao);
      printCheckItem('Iluminação de emergência', dados.iluminacaoEmergencia);
      printCheckItem('Limpeza geral', dados.limpeza);
      
      y += 5;
      
      printSectionTitle('Cabina');
      printCheckItem('Portas', dados.portas);
      printCheckItem('Botões', dados.botoes);
      printCheckItem('Display / Indicadores', dados.display);
      printCheckItem('Iluminação interna', dados.iluminacaoInterna);
      printCheckItem('Ventilação / Exaustor', dados.ventilacaoCabina);
      printCheckItem('Interfone / Alarme', dados.interfone);
      printCheckItem('Espelho / Acabamentos', dados.espelho);
      printCheckItem('Piso / Nivelamento', dados.piso);
      
      y += 5;
      
      printSectionTitle('Poço');
      printCheckItem('Amortecedores', dados.amortecedores);
      printCheckItem('Limpeza do poço', dados.limpezaPoco);
      printCheckItem('Drenagem de água', dados.drenagem);
      printCheckItem('Iluminação', dados.iluminacaoPoco);
      printCheckItem('Cabos elétricos', dados.cabosEletricos);
      
      y += 5;
      
      printSectionTitle('Reparos Executados');
      printLongText(dados.reparosExecutados || 'Nenhum reparo executado.');
      
      printSectionTitle('Observações / Recomendações');
      printLongText(dados.observacoes || 'Sem observações adicionais.');
      
      checkPageBreak(30);
      y += 10;
      pdf.setFontSize(8);
      pdf.setFont('helvetica', 'italic');
      pdf.setTextColor(100, 100, 100);
      pdf.text(
        `Documento gerado automaticamente por Lift Control em ${new Date().toLocaleDateString('pt-BR')}`,
        pageWidth / 2,
        y,
        { align: 'center' }
      );

      const totalPages = pdf.internal.pages.length - 1;
      for (let i = 1; i <= totalPages; i++) {
        pdf.setPage(i);
        pdf.setFontSize(9);
        pdf.setFont('helvetica', 'normal');
        pdf.setTextColor(100, 100, 100);
        pdf.text(
          `Página ${i} de ${totalPages}`,
          pageWidth / 2,
          pageHeight - 20,
          { align: 'center' }
        );
      }

      const nomeArquivo = `Checklist_${dados.nomeCondominio.replace(/[^a-zA-Z0-9]/g, '')}_${dados.elevadorInspecionado.replace(/\s+/g, '')}_${new Date().toISOString().split('T')[0]}.pdf`;
      pdf.save(nomeArquivo);
      
      alert('PDF gerado com sucesso!');
    });
  </script>
</body>
</html>
