<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checklist Digital – Lift Control - PDF Texto Limpo</title>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background-color: #f7f9fc;
      color: #223151;
    }
    form {
      max-width: 800px;
      background: white;
      margin: auto;
      padding: 30px 40px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,.1);
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px 14px;
      font-size: 15px;
      border-radius: 6px;
      border: 1.5px solid #ccc;
      margin-top: 8px;
      box-sizing: border-box;
      font-weight: 500;
      color: #223151;
      resize: vertical;
      min-height: 60px;
    }
    textarea {
      min-height: 100px;
    }
    label.check-item {
      display: flex;
      align-items: center;
      margin-top: 8px;
      font-weight: 600;
      font-size: 14px;
      color: #223151;
      user-select: none;
      cursor: pointer;
    }
    label.check-item input[type="checkbox"] {
      margin-right: 10px;
      width: 22px;
      height: 22px;
    }
    button {
      margin-top: 30px;
      background-color: #223151;
      color: white;
      border: none;
      padding: 15px 45px;
      border-radius: 50px;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #1a273e;
    }
  </style>
</head>
<body>
  <form id="checklistForm" novalidate>
    <h1>Checklist Digital – Lift Control</h1>

    <label for="nomeCondominio">Nome do Condomínio <span style="color:red">*</span></label>
    <input id="nomeCondominio" name="nomeCondominio" type="text" required autocomplete="off" />

    <label for="endereco">Endereço Completo <span style="color:red">*</span></label>
    <input id="endereco" name="endereco" type="text" required autocomplete="off" />

    <label for="totalElevadores">Total de Elevadores no Prédio <span style="color:red">*</span></label>
    <input id="totalElevadores" name="totalElevadores" type="number" min="1" required autocomplete="off" />

    <label for="elevadorInspecionado">Elevador Inspecionado <span style="color:red">*</span></label>
    <select id="elevadorInspecionado" name="elevadorInspecionado" required>
      <option value="" disabled selected>Selecione...</option>
      <option>Social</option>
      <option>Serviço</option>
      <option>Elevador 1</option>
      <option>Elevador 2</option>
      <option>Elevador 3</option>
    </select>

    <label for="emailCondominio">Email do Condomínio <span style="color:red">*</span></label>
    <input id="emailCondominio" name="emailCondominio" type="email" required autocomplete="off" />

    <label for="telefoneResponsavel">Telefone do Responsável <span style="color:red">*</span></label>
    <input id="telefoneResponsavel" name="telefoneResponsavel" type="text" pattern="^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$" required autocomplete="off" />

    <label for="dataManutencao">Data da Manutenção <span style="color:red">*</span></label>
    <input id="dataManutencao" name="dataManutencao" type="date" required />

    <label for="tipoManutencao">Tipo de Manutenção <span style="color:red">*</span></label>
    <select id="tipoManutencao" name="tipoManutencao" required>
      <option value="" disabled selected>Selecione...</option>
      <option>Preventiva</option>
      <option>Corretiva</option>
      <option>Emergencial</option>
    </select>

    <label for="nomeTecnico">Nome Completo do Técnico <span style="color:red">*</span></label>
    <input id="nomeTecnico" name="nomeTecnico" type="text" required autocomplete="off" />

    <label for="empresaTecnico">Empresa do Técnico <span style="color:red">*</span></label>
    <input id="empresaTecnico" name="empresaTecnico" type="text" required autocomplete="off" />

    <label for="registroTecnico">CREA / Registro Profissional</label>
    <input id="registroTecnico" name="registroTecnico" type="text" autocomplete="off" />

    <div class="checklist-section">
      <h2>Casa de Máquinas</h2>
      <label class="check-item"><input type="checkbox" name="motor" /> Motor de tração</label>
      <label class="check-item"><input type="checkbox" name="freio" /> Freio eletromagnético</label>
      <label class="check-item"><input type="checkbox" name="redutor" /> Redutor</label>
      <label class="check-item"><input type="checkbox" name="quadro" /> Quadro de comando</label>
      <label class="check-item"><input type="checkbox" name="limitador" /> Limitador de velocidade</label>
      <label class="check-item"><input type="checkbox" name="cabos" /> Cabos de tração</label>
      <label class="check-item"><input type="checkbox" name="polias" /> Polias</label>
      <label class="check-item"><input type="checkbox" name="ventilacao" /> Ventilação da casa</label>
      <label class="check-item"><input type="checkbox" name="iluminacaoEmergencia" /> Iluminação de emergência</label>
      <label class="check-item"><input type="checkbox" name="limpeza" /> Limpeza geral</label>
    </div>

    <div class="checklist-section">
      <h2>Cabina</h2>
      <label class="check-item"><input type="checkbox" name="portas" /> Portas</label>
      <label class="check-item"><input type="checkbox" name="botoes" /> Botões</label>
      <label class="check-item"><input type="checkbox" name="display" /> Display / Indicadores</label>
      <label class="check-item"><input type="checkbox" name="iluminacaoInterna" /> Iluminação interna</label>
      <label class="check-item"><input type="checkbox" name="ventilacaoCabina" /> Ventilação / Exaustor</label>
      <label class="check-item"><input type="checkbox" name="interfone" /> Interfone / Alarme</label>
      <label class="check-item"><input type="checkbox" name="espelho" /> Espelho / Acabamentos</label>
      <label class="check-item"><input type="checkbox" name="piso" /> Piso / Nivelamento</label>
    </div>

    <div class="checklist-section">
      <h2>Poço</h2>
      <label class="check-item"><input type="checkbox" name="amortecedores" /> Amortecedores</label>
      <label class="check-item"><input type="checkbox" name="limpezaPoco" /> Limpeza do poço</label>
      <label class="check-item"><input type="checkbox" name="drenagem" /> Drenagem de água</label>
      <label class="check-item"><input type="checkbox" name="iluminacaoPoco" /> Iluminação</label>
      <label class="check-item"><input type="checkbox" name="cabosEletricos" /> Cabos elétricos</label>
    </div>

    <label for="reparosExecutados" style="margin-top: 30px;">Reparos Executados <span style="color:red">*</span></label>
    <textarea id="reparosExecutados" name="reparosExecutados" minlength="10" required></textarea>

    <label for="observacoes" style="margin-top: 20px;">Observações / Recomendações</label>
    <textarea id="observacoes" name="observacoes"></textarea>

    <button type="submit">Gerar PDF</button>
  </form>

  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script>
    document.getElementById('checklistForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!e.target.checkValidity()) {
        alert('Por favor, preencha todos os campos obrigatórios corretamente.');
        e.target.reportValidity();
        return;
      }

      const dados = {};
      new FormData(e.target).forEach((value, key) => {
        dados[key] = value;
      });

      const checkboxIds = ['motor','freio','redutor','quadro','limitador','cabos','polias','ventilacao','iluminacaoEmergencia','limpeza',
                          'portas','botoes','display','iluminacaoInterna','ventilacaoCabina','interfone','espelho','piso',
                          'amortecedores','limpezaPoco','drenagem','iluminacaoPoco','cabosEletricos'];
      checkboxIds.forEach(id => {
        const el = e.target.elements[id];
        dados[id] = el && el.checked ? "Ok" : "Pendente";
      });

      function formatDateBR(dateStr) {
        if(!dateStr) return '-';
        const [year, month, day] = dateStr.split("-");
        return `${day}/${month}/${year}`;
      }
      dados.dataManutencao = formatDateBR(dados.dataManutencao);

      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('p', 'pt', 'a4');
      const margin = 40;
      const pageWidth = pdf.internal.pageSize.width - margin * 2;
      const lineHeight = 20;
      let y = margin;

      function printTitle(text) {
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(18);
        pdf.text(text, margin, y);
        y += lineHeight + 8;
      }

      function printField(label, value) {
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(14);
        pdf.text(label + ':', margin, y);
        pdf.setFont('helvetica', 'normal');
        pdf.setFontSize(14);
        pdf.text(value, margin + 100, y);
        y += lineHeight;
      }

      function printList(title, list) {
        printTitle(title);
        pdf.setFont('helvetica', 'normal');
        pdf.setFontSize(13);
        list.forEach(item => {
          pdf.text('- ' + item, margin + 20, y);
          y += lineHeight;
        });
        y += 10;
      }

      printTitle('Dados do Condomínio');
      printField('Nome', dados.nomeCondominio);
      printField('Endereço', dados.endereco);
      printField('Total Elevadores', dados.totalElevadores);
      printField('Elevador Inspecionado', dados.elevadorInspecionado);
      printField('Email', dados.emailCondominio);
      printField('Telefone', dados.telefoneResponsavel);

      printTitle('Manutenção');
      printField('Data', dados.dataManutencao);
      printField('Tipo', dados.tipoManutencao);
      printField('Técnico', dados.nomeTecnico);
      printField('Empresa', dados.empresaTecnico);
      printField('Registro', dados.registroTecnico || '-');

      printList('Casa de Máquinas', [
        `Motor de tração: ${dados.motor}`,
        `Freio eletromagnético: ${dados.freio}`,
        `Redutor: ${dados.redutor}`,
        `Quadro de comando: ${dados.quadro}`,
        `Limitador de velocidade: ${dados.limitador}`,
        `Cabos de tração: ${dados.cabos}`,
        `Polias: ${dados.polias}`,
        `Ventilação: ${dados.ventilacao}`,
        `Iluminação de emergência: ${dados.iluminacaoEmergencia}`,
        `Limpeza geral: ${dados.limpeza}`
      ]);

      printList('Cabina', [
        `Portas: ${dados.portas}`,
        `Botões: ${dados.botoes}`,
        `Display / Indicadores: ${dados.display}`,
        `Iluminação interna: ${dados.iluminacaoInterna}`,
        `Ventilação / Exaustor: ${dados.ventilacaoCabina}`,
        `Interfone / Alarme: ${dados.interfone}`,
        `Espelho / Acabamentos: ${dados.espelho}`,
        `Piso / Nivelamento: ${dados.piso}`
      ]);

      printList('Poço', [
        `Amortecedores: ${dados.amortecedores}`,
        `Limpeza do poço: ${dados.limpezaPoco}`,
        `Drenagem de água: ${dados.drenagem}`,
        `Iluminação: ${dados.iluminacaoPoco}`,
        `Cabos elétricos: ${dados.cabosEletricos}`
      ]);

      printTitle('Reparos Executados');
      pdf.setFontSize(14);
      pdf.setFont('helvetica', 'normal');
      let splitText = pdf.splitTextToSize(dados.reparosExecutados || '-', pageWidth);
      splitText.forEach(line => {
        pdf.text(line, margin + 20, y);
        y += lineHeight;
      });

      printTitle('Observações / Recomendações');
      splitText = pdf.splitTextToSize(dados.observacoes || '-', pageWidth);
      splitText.forEach(line => {
        pdf.text(line, margin + 20, y);
        y += lineHeight;
      });

      y += 15;
      pdf.setFontSize(12);
      pdf.text('Gerado por Lift Control - 2025', margin, y, {align: 'center', maxWidth: pageWidth});

      pdf.save(`Checklist_${dados.nomeCondominio.replace(/\s+/g,"")}_${dados.elevadorInspecionado.replace(/\s+/g,"")}.pdf`);
    });
</script>
