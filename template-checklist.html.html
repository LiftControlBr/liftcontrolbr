<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Checklist Digital – Lift Control - PDF Texto Formatado</title>

<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f7f9fc;
    padding: 30px;
    color: #223151;
  }
  form {
    background: white;
    max-width: 820px;
    margin: auto;
    padding: 30px 40px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    color: #223151;
  }
  label {
    font-weight: 600;
    margin-top: 20px;
    display: block;
  }
  input, select, textarea {
    width: 100%;
    padding: 10px 14px;
    font-size: 15px;
    border-radius: 6px;
    border: 1.5px solid #ccc;
    margin-top: 8px;
    box-sizing: border-box;
    font-weight: 500;
    color: #223151;
  }
  textarea {
    resize: vertical;
    min-height: 100px;
  }
  label.check-item {
    display: flex;
    align-items: center;
    margin: 12px 0;
    font-weight: 600;
    font-size: 14px;
    color: #223151;
    user-select: none;
  }
  label.check-item input[type="checkbox"] {
    margin-right: 12px;
    width: 20px;
    height: 20px;
  }
  button {
    margin-top: 25px;
    padding: 15px 40px;
    font-weight: 700;
    font-size: 18px;
    background: #223151;
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: background 0.3s ease;
    width: 100%;
  }
  button:hover {
    background: #0b1f3a;
  }
</style>
</head>
<body>
<form id="checklistForm" novalidate>
  <h1>Checklist Digital – Lift Control</h1>

  <label for="nomeCondominio">Nome do Condomínio *</label>
  <input id="nomeCondominio" name="nomeCondominio" type="text" placeholder="Ex: Edifício teste" required />

  <label for="endereco">Endereço Completo *</label>
  <input id="endereco" name="endereco" type="text" placeholder="Rua teste 123" required />

  <label for="totalElevadores">Total de Elevadores no Prédio *</label>
  <input id="totalElevadores" name="totalElevadores" type="number" min="1" placeholder="2" required />

  <label for="elevadorInspecionado">Elevador Inspecionado *</label>
  <select id="elevadorInspecionado" name="elevadorInspecionado" required>
    <option value="" disabled selected>Selecione...</option>
    <option>Social</option>
    <option>Serviço</option>
  </select>

  <label for="emailCondominio">Email do Condomínio *</label>
  <input id="emailCondominio" name="emailCondominio" type="email" placeholder="teste@teste.com" required />

  <label for="telefoneResponsavel">Telefone do Responsável *</label>
  <input id="telefoneResponsavel" name="telefoneResponsavel" type="text" placeholder="13987654321" required />

  <label for="dataManutencao">Data da Manutenção *</label>
  <input id="dataManutencao" name="dataManutencao" type="date" required />

  <label for="tipoManutencao">Tipo de Manutenção *</label>
  <select id="tipoManutencao" name="tipoManutencao" required>
    <option value="" disabled selected>Selecione...</option>
    <option>Preventiva</option>
  </select>

  <label for="nomeTecnico">Nome Completo do Técnico *</label>
  <input id="nomeTecnico" name="nomeTecnico" type="text" placeholder="Rodrigo teste" required />

  <label for="empresaTecnico">Empresa do Técnico *</label>
  <input id="empresaTecnico" name="empresaTecnico" type="text" placeholder="rc teste" required />

  <label for="registroTecnico">CREA / Registro Profissional</label>
  <input id="registroTecnico" name="registroTecnico" type="text" placeholder="1000" />

  <div class="checklist-section">
    <h2>Casa de Máquinas</h2>
    <label class="check-item"><input type="checkbox" name="motor" /> Motor de tração: Ok</label>
    <label class="check-item"><input type="checkbox" name="freio" /> Freio eletromagnético: Ok</label>
    <label class="check-item"><input type="checkbox" name="redutor" /> Redutor: Ok</label>
    <label class="check-item"><input type="checkbox" name="quadro" /> Quadro de comando: Ok</label>
    <label class="check-item"><input type="checkbox" name="limitador" /> Limitador de velocidade: Ok</label>
    <label class="check-item"><input type="checkbox" name="cabos" /> Cabos de tração: Ok</label>
    <label class="check-item"><input type="checkbox" name="polias" /> Polias: Pendente</label>
    <label class="check-item"><input type="checkbox" name="ventilacao" /> Ventilação: Ok</label>
    <label class="check-item"><input type="checkbox" name="iluminacaoEmergencia" /> Iluminação de emergência: Ok</label>
    <label class="check-item"><input type="checkbox" name="limpeza" /> Limpeza geral: Ok</label>
  </div>

  <div class="checklist-section">
    <h2>Cabina</h2>
    <label class="check-item"><input type="checkbox" name="portas" /> Portas: Ok</label>
    <label class="check-item"><input type="checkbox" name="botoes" /> Botões: Ok</label>
    <label class="check-item"><input type="checkbox" name="display" /> Display / Indicadores: Pendente</label>
    <label class="check-item"><input type="checkbox" name="iluminacaoInterna" /> Iluminação interna: Pendente</label>
    <label class="check-item"><input type="checkbox" name="ventilacaoCabina" /> Ventilação / Exaustor: Ok</label>
    <label class="check-item"><input type="checkbox" name="interfone" /> Interfone / Alarme: Ok</label>
    <label class="check-item"><input type="checkbox" name="espelho" /> Espelho / Acabamentos: Ok</label>
    <label class="check-item"><input type="checkbox" name="piso" /> Piso / Nivelamento: Ok</label>
  </div>

  <div class="checklist-section">
    <h2>Poço</h2>
    <label class="check-item"><input type="checkbox" name="amortecedores" /> Amortecedores: Ok</label>
    <label class="check-item"><input type="checkbox" name="limpezaPoco" /> Limpeza do poço: Pendente</label>
    <label class="check-item"><input type="checkbox" name="drenagem" /> Drenagem de água: Ok</label>
    <label class="check-item"><input type="checkbox" name="iluminacaoPoco" /> Iluminação: Ok</label>
    <label class="check-item"><input type="checkbox" name="cabosEletricos" /> Cabos elétricos: Ok</label>
  </div>

  <label for="reparosExecutados" style="margin-top: 30px;">Reparos Executados</label>
  <textarea id="reparosExecutados" name="reparosExecutados" minlength="10" required placeholder="Reparo em tudo antigo">Reparo em tudo antigo</textarea>

  <label for="observacoes" style="margin-top: 20px;">Observações / Recomendações</label>
  <textarea id="observacoes" name="observacoes" placeholder="-" ></textarea>

  <div class="buttons">
    <button type="submit">Gerar PDF</button>
  </div>
</form>

<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script>
document.getElementById('checklistForm').addEventListener('submit', async (event) => {
  event.preventDefault();

  if (!event.target.checkValidity()) {
    alert('Por favor, preencha todos os campos obrigatórios corretamente.');
    event.target.reportValidity();
    return;
  }

  const dados = {};
  new FormData(event.target).forEach((value, key) => {
    dados[key] = value;
  });
  
  ['motor','freio','redutor','quadro','limitador','cabos','polias','ventilacao','iluminacaoEmergencia','limpeza',
  'portas','botoes','display','iluminacaoInterna','ventilacaoCabina','interfone','espelho','piso',
  'amortecedores','limpezaPoco','drenagem','iluminacaoPoco','cabosEletricos'].forEach(id => {
    const el = event.target.elements[id];
    dados[id] = el && el.checked ? "Ok" : "Pendente";
  });

  function formatDateBR(dateString) {
    if(!dateString) return '-';
    const [year, month, day] = dateString.split("-");
    return `${day}/${month}/${year}`;
  }
  dados.dataManutencao = formatDateBR(dados.dataManutencao);

  const content = `
  Dados do Condomínio
  Nome: ${dados.nomeCondominio}
  Endereço: ${dados.endereco}
  Total de Elevadores: ${dados.totalElevadores}
  Elevador Inspecionado: ${dados.elevadorInspecionado}
  Email: ${dados.emailCondominio}
  Telefone: ${dados.telefoneResponsavel}

  Manutenção
  Data: ${dados.dataManutencao}
  Tipo: ${dados.tipoManutencao}
  Técnico: ${dados.nomeTecnico}
  Empresa: ${dados.empresaTecnico}
  Registro: ${dados.registroTecnico || '-'}

  Casa de Máquinas
  Motor de tração: ${dados.motor}
  Freio eletromagnético: ${dados.freio}
  Redutor: ${dados.redutor}
  Quadro de comando: ${dados.quadro}
  Limitador de velocidade: ${dados.limitador}
  Cabos de tração: ${dados.cabos}
  Polias: ${dados.polias}
  Ventilação: ${dados.ventilacao}
  Iluminação de emergência: ${dados.iluminacaoEmergencia}
  Limpeza geral: ${dados.limpeza}

  Cabina
  Portas: ${dados.portas}
  Botões: ${dados.botoes}
  Display / Indicadores: ${dados.display}
  Iluminação interna: ${dados.iluminacaoInterna}
  Ventilação / Exaustor: ${dados.ventilacaoCabina}
  Interfone / Alarme: ${dados.interfone}
  Espelho / Acabamentos: ${dados.espelho}
  Piso / Nivelamento: ${dados.piso}

  Poço
  Amortecedores: ${dados.amortecedores}
  Limpeza do poço: ${dados.limpezaPoco}
  Drenagem de água: ${dados.drenagem}
  Iluminação: ${dados.iluminacaoPoco}
  Cabos elétricos: ${dados.cabosEletricos}

  Reparos Executados
  ${dados.reparosExecutados}

  Observações / Recomendações
  ${dados.observacoes || '-'}

  por Lift Control - 2025
  `;

  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p', 'pt', 'a4');
  let margin = 40;
  let verticalOffset = margin;
  let lineHeight = 18;
  let pageHeight = pdf.internal.pageSize.height - margin;

  let lines = pdf.splitTextToSize(content, pdf.internal.pageSize.width - 2*margin);
  for(let i = 0; i < lines.length; i++){
    if(verticalOffset + lineHeight > pageHeight){
      pdf.addPage();
      verticalOffset = margin;
    }
    pdf.text(lines[i], margin, verticalOffset);
    verticalOffset += lineHeight;
  }

  pdf.save(`Checklist_${dados.nomeCondominio.replace(/\s+/g,"")}_${dados.elevadorInspecionado.replace(/\s+/g,"")}.pdf`);
});
</script>
