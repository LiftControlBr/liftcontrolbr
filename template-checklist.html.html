<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checklist Digital - Elevadores</title>

  <!-- Bootstrap 5 CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      background: #121212;
      color: #f8f9fa;
      padding: 20px;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }
    .container {
      background: #1f1f1f;
      padding: 30px;
      border-radius: 15px;
      max-width: 900px;
      margin: 0 auto;
      box-shadow: 0 0 20px #007bff88;
    }
    h1 {
      text-align: center;
      color: #0d6efd;
      margin-bottom: 25px;
      font-weight: 700;
    }
    label.form-check-label {
      cursor: pointer;
      user-select: none;
    }
    textarea.form-control {
      min-height: 100px;
    }
    #signature-pad {
      border: 2px dashed #0d6efd;
      border-radius: 12px;
      background: #121212;
      width: 100%;
      height: 180px;
      cursor: crosshair;
    }
    .btn-clear {
      background-color: #dc3545;
      border-radius: 50px;
      padding: 10px 40px;
      font-weight: bold;
      margin-right: 15px;
      border: none;
    }
    .btn-clear:hover {
      background-color: #bb2d3b;
    }
    .btn-submit {
      background-color: #0d6efd;
      border-radius: 50px;
      padding: 10px 50px;
      font-weight: bold;
      border: none;
      color: white;
    }
    .btn-submit:hover {
      background-color: #0b5ed7;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Checklist Digital de Manutenção - Elevadores</h1>

    <form id="checklistForm" novalidate>

      <div class="mb-3">
        <label for="nomeCondominio" class="form-label">Nome do Condomínio <span class="text-danger">*</span></label>
        <input type="text" id="nomeCondominio" class="form-control" placeholder="Ex: Edifício Solar das Palmeiras" required />
        <div class="invalid-feedback">Por favor, preencha o nome do condomínio.</div>
      </div>

      <div class="mb-3">
        <label for="endereco" class="form-label">Endereço Completo <span class="text-danger">*</span></label>
        <input type="text" id="endereco" class="form-control" required />
        <div class="invalid-feedback">Por favor, preencha o endereço.</div>
      </div>

      <div class="mb-3">
        <label for="totalElevadores" class="form-label">Total de Elevadores no Prédio <span class="text-danger">*</span></label>
        <input type="number" id="totalElevadores" class="form-control" min="1" required />
        <div class="invalid-feedback">Por favor, informe o número de elevadores.</div>
      </div>

      <div class="mb-3">
        <label for="elevadorInspecionado" class="form-label">Elevador Inspecionado <span class="text-danger">*</span></label>
        <select id="elevadorInspecionado" class="form-select" required>
          <option value="" selected disabled>Selecione...</option>
          <option>Social</option>
          <option>Serviço</option>
          <option>Elevador 1</option>
          <option>Elevador 2</option>
          <option>Elevador 3</option>
        </select>
        <div class="invalid-feedback">Por favor, selecione o elevador inspecionado.</div>
      </div>

      <div class="mb-3">
        <label for="emailCondominio" class="form-label">Email do Condomínio <span class="text-danger">*</span></label>
        <input type="email" id="emailCondominio" class="form-control" placeholder="contato@condominio.com" required />
        <div class="invalid-feedback">Informe um email válido.</div>
      </div>

      <div class="mb-3">
        <label for="telefoneResponsavel" class="form-label">Telefone do Responsável <span class="text-danger">*</span></label>
        <input type="tel" id="telefoneResponsavel" class="form-control" placeholder="(13) 99999-9999" required pattern="^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$" />
        <div class="invalid-feedback">Informe telefone no formato (13) 99999-9999.</div>
      </div>

      <div class="mb-3">
        <label for="dataManutencao" class="form-label">Data da Manutenção <span class="text-danger">*</span></label>
        <input type="date" id="dataManutencao" class="form-control" required />
        <div class="invalid-feedback">Por favor, selecione a data.</div>
      </div>

      <div class="mb-3">
        <label for="tipoManutencao" class="form-label">Tipo de Manutenção <span class="text-danger">*</span></label>
        <select id="tipoManutencao" class="form-select" required>
          <option value="" selected disabled>Selecione...</option>
          <option>Preventiva</option>
          <option>Corretiva</option>
          <option>Emergencial</option>
          <option>Inspeção</option>
        </select>
        <div class="invalid-feedback">Por favor, selecione o tipo de manutenção.</div>
      </div>

      <div class="mb-3">
        <label for="nomeTecnico" class="form-label">Nome Completo do Técnico <span class="text-danger">*</span></label>
        <input type="text" id="nomeTecnico" class="form-control" placeholder="Nome completo" required />
        <div class="invalid-feedback">Informe o nome do técnico.</div>
      </div>

      <div class="mb-3">
        <label for="empresaTecnico" class="form-label">Empresa do Técnico <span class="text-danger">*</span></label>
        <input type="text" id="empresaTecnico" class="form-control" required />
        <div class="invalid-feedback">Informe a empresa do técnico.</div>
      </div>

      <div class="mb-3">
        <label for="registroTecnico" class="form-label">CREA / Registro Profissional</label>
        <input type="text" id="registroTecnico" class="form-control" />
      </div>

      <h3 class="mt-4 text-primary">Casa de Máquinas</h3>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="motor" />
        <label class="form-check-label" for="motor">Motor de tração - Estado geral</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="freio" />
        <label class="form-check-label" for="freio">Freio eletromagnético - Funcionamento</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="redutor" />
        <label class="form-check-label" for="redutor">Redutor - Nível de óleo / ruídos</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="quadro" />
        <label class="form-check-label" for="quadro">Quadro de comando - Limpeza / conexões</label>
      </div>
      <!-- Continue as checkboxes conforme necessário -->

      <div class="mb-3 mt-4">
        <label for="reparosExecutados" class="form-label">Reparos Executados <span class="text-danger">*</span></label>
        <textarea id="reparosExecutados" class="form-control" minlength="10" required placeholder="Descreva os reparos realizados"></textarea>
        <div class="invalid-feedback">Informe os reparos executados.</div>
      </div>

      <div class="mb-3">
        <label for="observacoes" class="form-label">Observações / Recomendações</label>
        <textarea id="observacoes" class="form-control" placeholder="Observações importantes ou recomendações"></textarea>
      </div>

      <div class="mb-3">
        <label class="form-label">Assinatura do Técnico <span class="text-danger">*</span></label>
        <canvas id="signature-pad" style="border:2px dashed #0d6efd; border-radius: 12px; width: 100%; height: 180px; background:#121212; cursor: crosshair;"></canvas>
      </div>

      <div class="d-flex gap-3 justify-content-center mt-3 flex-wrap">
        <button type="button" class="btn btn-danger btn-clear" id="clear-signature">Limpar Assinatura</button>
        <button type="submit" class="btn btn-primary btn-submit">Gerar PDF</button>
      </div>

    </form>
  </div>

  <!-- Bootstrap 5 JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Bootstrap form validation
    (() => {
      const form = document.getElementById('checklistForm');
      form.addEventListener('submit', function (event) {
        event.preventDefault();
        if (!form.checkValidity()) {
          event.stopPropagation();
          form.classList.add('was-validated');
          return;
        }

        if (!signatureDrawn()) {
          alert('Por favor, assine o formulário antes de gerar o PDF.');
          return;
        }

        alert('Formulário válido. Aqui você pode implementar a geração do PDF.');
      }, false);
    })();

    // Canvas assinatura
    const canvas = document.getElementById('signature-pad');
    const ctx = canvas.getContext('2d');
    let drawing = false;

    function resizeCanvas() {
      const ratio = window.devicePixelRatio || 1;
      canvas.width = canvas.offsetWidth * ratio;
      canvas.height = 180 * ratio;
      canvas.style.height = '180px';
      ctx.scale(ratio, ratio);
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      ctx.lineWidth = 3;
      ctx.strokeStyle = '#0d6efd';
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const startDraw = (x, y) => {
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(x, y);
    };

    const draw = (x, y) => {
      if (!drawing) return;
      ctx.lineTo(x, y);
      ctx.stroke();
    };

    const endDraw = () => {
      drawing = false;
    };

    // Mouse events
    canvas.addEventListener('mousedown', e => startDraw(e.offsetX, e.offsetY));
    canvas.addEventListener('mousemove', e => draw(e.offsetX, e.offsetY));
    window.addEventListener('mouseup', endDraw);

    // Touch events
    canvas.addEventListener('touchstart', e => {
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches[0];
      startDraw(touch.clientX - rect.left, touch.clientY - rect.top);
    });
    canvas.addEventListener('touchmove', e => {
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      const touch = e.touches[0];
      draw(touch.clientX - rect.left, touch.clientY - rect.top);
    });
    window.addEventListener('touchend', e => {
      e.preventDefault();
      endDraw();
    });

    // Resetar assinatura
    document.getElementById('clear-signature').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });

    // Checar se usuário assinou (canvas não está vazio)
    function signatureDrawn() {
      const blank = document.createElement('canvas');
      blank.width = canvas.width;
      blank.height = canvas.height;
      return canvas.toDataURL() !== blank.toDataURL();
    }
  </script>
</body>
</html>
