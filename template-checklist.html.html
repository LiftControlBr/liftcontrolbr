<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Checklist Digital de Manutenção - Elevador</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9fafb;
    margin: 0; padding: 20px; color: #333;
  }
  h1 { text-align:center; margin-bottom:30px; color:#222; }
  form {
    max-width: 720px;
    background: white;
    margin: 0 auto;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-top: 18px;
    font-weight: 600;
    font-size: 15px;
    color: #111;
  }
  input[type="text"], input[type="email"], input[type="number"], input[type="date"], select, textarea {
    width: 100%;
    padding: 12px 15px;
    margin-top: 6px;
    font-size: 15px;
    border: 1.5px solid #ccc;
    border-radius: 8px;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
  }
  input[type="text"]:focus, input[type="email"]:focus, input[type="number"]:focus, input[type="date"]:focus, select:focus, textarea:focus {
    border-color: #4a90e2;
    outline: none;
  }
  textarea {
    resize: vertical;
    min-height: 80px;
  }
  /* checklist estilos */
  .checklist-section {
    margin-top: 25px;
  }
  .checklist-section h2 {
    margin-bottom: 15px;
    color: #222;
    border-bottom: 2px solid #4a90e2;
    padding-bottom: 5px;
  }
  /* label é clicavel para checkbox */
  .check-item {
    display: flex;
    align-items: center;
    background: #eee;
    padding: 10px 15px;
    border-radius: 8px;
    margin-bottom: 12px;
    cursor: pointer;
    user-select: none;
  }
  .check-item:hover {
    background: #dbe9fb;
  }
  .check-item input[type="checkbox"] {
    width: 26px;
    height: 26px;
    margin-right: 15px;
    cursor: pointer;
    flex-shrink: 0;
  }
  /* Assinatura */
  .signature-section {
    margin-top: 30px;
  }
  label.signature-label {
    font-weight: 600;
    font-size: 15px;
    color: #111;
    margin-bottom: 6px;
  }
  #signature-pad {
    border: 2px dashed #4a90e2;
    border-radius: 12px;
    width: 100%;
    height: 200px;
    background-color: #f4f9ff;
    cursor: crosshair;
  }
  /* Botões */
  .buttons {
    margin-top: 30px;
    text-align: center;
    display: flex;
    justify-content: center;
    gap: 25px;
    flex-wrap: wrap;
  }
  button {
    background-color: #4a90e2;
    color: white;
    border: none;
    border-radius: 50px;
    padding: 14px 45px;
    font-size: 17px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
  }
  button:hover:not(:disabled) {
    background-color: #357ABD;
    transform: translateY(-3px);
  }
  button:disabled {
    background-color: #aaa;
    cursor: not-allowed;
    transform: none;
  }
  button.clear-button {
    background-color: #d9534f;
  }
  button.clear-button:hover:not(:disabled) {
    background-color: #c9302c;
  }
  @media (max-width: 480px) {
    form { padding: 20px 15px; }
    button {
      width: 100%;
      padding: 16px 0;
      font-size: 18px;
    }
    .buttons { flex-direction: column; gap: 15px; }
  }
</style>
</head>
<body>

<h1>Checklist Digital de Manutenção - Elevador</h1>

<form id="checklistForm" novalidate>

  <label for="nomeCondominio">Nome do Condomínio <span style="color:red;">*</span></label>
  <input type="text" id="nomeCondominio" name="nomeCondominio" placeholder="Ex: Edifício Solar das Palmeiras" required autocomplete="off" />

  <label for="endereco">Endereço Completo <span style="color:red;">*</span></label>
  <input type="text" id="endereco" name="endereco" required autocomplete="off" />

  <label for="totalElevadores">Total de Elevadores no Prédio <span style="color:red;">*</span></label>
  <input type="number" id="totalElevadores" name="totalElevadores" min="1" required autocomplete="off" />

  <label for="elevadorInspecionado">Elevador Inspecionado <span style="color:red;">*</span></label>
  <select id="elevadorInspecionado" name="elevadorInspecionado" required style="font-size:18px; padding:12px;">
    <option value="" disabled selected>Selecione...</option>
    <option value="Social">Social</option>
    <option value="Serviço">Serviço</option>
    <option value="Elevador 1">Elevador 1</option>
    <option value="Elevador 2">Elevador 2</option>
    <option value="Elevador 3">Elevador 3</option>
  </select>

  <label for="emailCondominio">Email do Condomínio <span style="color:red;">*</span></label>
  <input type="email" id="emailCondominio" name="emailCondominio" placeholder="contato@condominio.com" required autocomplete="off" />

  <label for="telefoneResponsavel">Telefone do Responsável <span style="color:red;">*</span></label>
  <input type="text" id="telefoneResponsavel" name="telefoneResponsavel" placeholder="(13) 99999-9999" required autocomplete="off" pattern="^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$" title="Informe telefone no formato (13) 99999-9999"/>

  <label for="dataManutencao">Data da Manutenção <span style="color:red;">*</span></label>
  <input type="date" id="dataManutencao" name="dataManutencao" required />

  <label for="tipoManutencao">Tipo de Manutenção <span style="color:red;">*</span></label>
  <select id="tipoManutencao" name="tipoManutencao" required style="font-size:18px; padding:12px;">
    <option value="" disabled selected>Selecione...</option>
    <option value="Preventiva">Preventiva</option>
    <option value="Corretiva">Corretiva</option>
    <option value="Emergencial">Emergencial</option>
    <option value="Inspeção">Inspeção</option>
  </select>

  <label for="nomeTecnico">Nome Completo do Técnico <span style="color:red;">*</span></label>
  <input type="text" id="nomeTecnico" name="nomeTecnico" placeholder="Nome completo" required autocomplete="off" />

  <label for="empresaTecnico">Empresa do Técnico <span style="color:red;">*</span></label>
  <input type="text" id="empresaTecnico" name="empresaTecnico" required autocomplete="off" />

  <label for="registroTecnico">CREA / Registro Profissional</label>
  <input type="text" id="registroTecnico" name="registroTecnico" autocomplete="off" />

  <div class="checklist-section">
    <h2>Casa de Máquinas</h2>
    <label class="check-item"><input type="checkbox" id="motor" name="motor" /> Motor de tração - Estado geral</label>
    <label class="check-item"><input type="checkbox" id="freio" name="freio" /> Freio eletromagnético - Funcionamento</label>
    <label class="check-item"><input type="checkbox" id="redutor" name="redutor" /> Redutor - Nível de óleo / ruídos</label>
    <label class="check-item"><input type="checkbox" id="quadro" name="quadro" /> Quadro de comando - Limpeza / conexões</label>
    <label class="check-item"><input type="checkbox" id="limitador" name="limitador" /> Limitador de velocidade - Teste</label>
    <label class="check-item"><input type="checkbox" id="cabos" name="cabos" /> Cabos de tração - Desgaste / lubrificação</label>
    <label class="check-item"><input type="checkbox" id="polias" name="polias" /> Polias - Estado / alinhamento</label>
    <label class="check-item"><input type="checkbox" id="ventilacao" name="ventilacao" /> Ventilação da casa de máquinas</label>
    <label class="check-item"><input type="checkbox" id="iluminacaoEmergencia" name="iluminacaoEmergencia" /> Iluminação de emergência</label>
    <label class="check-item"><input type="checkbox" id="limpeza" name="limpeza" /> Limpeza geral do ambiente</label>
  </div>

  <div class="checklist-section">
    <h2>Cabina</h2>
    <label class="check-item"><input type="checkbox" id="portas" name="portas" /> Portas - Abertura / fechamento</label>
    <label class="check-item"><input type="checkbox" id="botoes" name="botoes" /> Botões - Funcionamento</label>
    <label class="check-item"><input type="checkbox" id="display" name="display" /> Display / Indicadores</label>
    <label class="check-item"><input type="checkbox" id="iluminacaoInterna" name="iluminacaoInterna" /> Iluminação interna</label>
    <label class="check-item"><input type="checkbox" id="ventilacaoCabina" name="ventilacaoCabina" /> Ventilação / Exaustor</label>
    <label class="check-item"><input type="checkbox" id="interfone" name="interfone" /> Interfone / Alarme</label>
    <label class="check-item"><input type="checkbox" id="espelho" name="espelho" /> Espelho / Acabamentos</label>
    <label class="check-item"><input type="checkbox" id="piso" name="piso" /> Piso / Nivelamento</label>
  </div>

  <div class="checklist-section">
    <h2>Poço</h2>
    <label class="check-item"><input type="checkbox" id="amortecedores" name="amortecedores" /> Amortecedores - Estado</label>
    <label class="check-item"><input type="checkbox" id="limpezaPoco" name="limpezaPoco" /> Limpeza do poço</label>
    <label class="check-item"><input type="checkbox" id="drenagem" name="drenagem" /> Drenagem de água</label>
    <label class="check-item"><input type="checkbox" id="iluminacaoPoco" name="iluminacaoPoco" /> Iluminação</label>
    <label class="check-item"><input type="checkbox" id="cabosEletricos" name="cabosEletricos" /> Cabos elétricos - Fixação</label>
  </div>

  <label for="reparosExecutados" style="margin-top: 2rem;">Reparos Executados <span style="color:red;">*</span></label>
  <textarea id="reparosExecutados" name="reparosExecutados" minlength="10" placeholder="Descreva os reparos realizados ..." required></textarea>

  <label for="observacoes" style="margin-top: 1rem;">Observações / Recomendações</label>
  <textarea id="observacoes" name="observacoes" placeholder="Observações importantes ..."></textarea>

  <div class="signature-section">
    <label class="signature-label">Assinatura do Técnico <span style="color:red;">*</span></label>
    <canvas id="signature-pad"></canvas>
    <div class="buttons" style="margin-top:10px;">
      <button type="button" class="clear-button" id="clear-signature">Limpar Assinatura</button>
      <button type="submit" id="generate-pdf">Gerar PDF</button>
    </div>
  </div>

</form>

<script>
  const canvas = document.getElementById('signature-pad');
  const ctx = canvas.getContext('2d');
  let drawing = false;

  function resizeCanvas() {
    const ratio = window.devicePixelRatio || 1;
    canvas.width = canvas.offsetWidth * ratio;
    canvas.height = 200 * ratio;
    canvas.style.height = '200px';
    ctx.scale(ratio, ratio);
    ctx.lineCap = 'round';
    ctx.lineWidth = 3;
    ctx.strokeStyle = '#333';
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  canvas.addEventListener('mousedown', e => {
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
  });
  canvas.addEventListener('mousemove', e => {
    if (!drawing) return;
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
  });
  window.addEventListener('mouseup', () => drawing = false);

  canvas.addEventListener('touchstart', e => {
    e.preventDefault();
    const rect = canvas.getBoundingClientRect();
    const t = e.touches[0];
    ctx.beginPath();
    ctx.moveTo(t.clientX - rect.left, t.clientY - rect.top);
    drawing = true;
  });
  canvas.addEventListener('touchmove', e => {
    e.preventDefault();
    if (!drawing) return;
    const rect = canvas.getBoundingClientRect();
    const t = e.touches[0];
    ctx.lineTo(t.clientX - rect.left, t.clientY - rect.top);
    ctx.stroke();
  });
  window.addEventListener('touchend', e => {
    e.preventDefault();
    drawing = false;
  });

  document.getElementById('clear-signature').addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });

  document.getElementById('checklistForm').addEventListener('submit', async e => {
    e.preventDefault();

    // Validação assinatura preenchida
    const blankCanvas = document.createElement('canvas');
    blankCanvas.width = canvas.width;
    blankCanvas.height = canvas.height;
    if(canvas.toDataURL()===blankCanvas.toDataURL()){
      alert('Por favor, assine o checklist antes de gerar o PDF.');
      return;
    }

    // Validação padrão dos campos obrigatórios
    if(!e.target.checkValidity()){
      alert('Por favor, preencha todos os campos obrigatórios corretamente.');
      e.target.reportValidity();
      return;
    }

    // Abaixo você pode inserir o código para gerar PDF ou enviar dados conforme necessário
    alert('Checklist preenchido com sucesso! (Esta é uma simulação)');
  });
</script>

</body>
</html>
